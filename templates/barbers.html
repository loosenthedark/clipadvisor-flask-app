{% extends 'base.html' %}

{% block title %}Barbers | Clipadvisor: Rate Your Barber!{% endblock %}

{% block navbarnavbarbers %}
<li class="nav-item active">
    <a class="nav-link" href="{{ url_for('barbers') }}">Barbers</a>
</li>
{% endblock %}

{% block content %}

<!-- barbers card container -->
<div class="reviews-card form-card mt-3 mb-5">
    <div class="reviews-section">

        <!-- barbers heading -->
        <div class="reviews-section-heading mb-3 text-center">
            <h4 class="card-header barber-blue white-text py-3"><span
                    id="barbers-pole-heading-img-white-background"></span><img
                    src="../static/images/barbers-pole_icon-white.png" id="barbers-pole-heading-img" height="100"
                    width="auto" alt="barbers pole heading image"><span id="review-submit-form-heading">Barbers</span>
            </h4>
        </div>
        <!-- /barbers heading -->

        <!-- review cards -->
        <div class="row">
            {% if reviews|length > 0 %}

            <!-- review card -->
            {% for review in reviews|sort(attribute='barbershopname') %}
            <div class="col-12 review-card-wrapper mb-3">
                <div class="card z-depth-5">
                    <!-- review card header -->
                    <div class="card-header reviews-card-header font-weight-light white-text">
                        <div class="star-rating-display yellow-text w-75 mx-auto text-center p-3">
                            {% if review.rating == 5 %}<i class="fas fa-star p-1"></i><i
                                class="fas fa-star p-1 yellow-text"></i><i class="fas fa-star p-1"></i><i
                                class="fas fa-star p-1"></i><i
                                class="fas fa-star p-1"></i>{% elif review.rating == 4 %}<i
                                class="fas fa-star p-1"></i><i class="fas fa-star p-1 yellow-text"></i><i
                                class="fas fa-star p-1"></i><i
                                class="fas fa-star p-1"></i>{% elif review.rating == 3 %}<i
                                class="fas fa-star p-1"></i><i class="fas fa-star p-1 yellow-text"></i><i
                                class="fas fa-star p-1"></i>{% elif review.rating == 2 %}<i
                                class="fas fa-star p-1"></i><i
                                class="fas fa-star p-1 yellow-text"></i>{% elif review.rating == 1 %}<i
                                class="fas fa-star p-1"></i>{% endif %}</div>
                    </div>
                    <!-- /review card header -->
                    <!-- review card body -->
                    <div class="card-body p-0">
                        <div class="row mx-0">
                            <div class="col-md-4 barber-blue-text pt-4">
                                <p class="h2 mb-1 font-weight-normal text-center">{{ review.barbershopname|title }}
                                </p>
                                <p class="h5 font-weight-light barber-red-text mb-1 text-center">vibe: {{ review.vibe }}
                                </p>
                            </div>
                            <div class="col-md-8 lighten-5 rounded-left pt-2 pb-4">
                                <blockquote class="blockquote pb-0 font-weight-light mb-0">
                                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ review.comments }}</p>
                                    <footer class="blockquote-footer mt-3 barber-blue-text">
                                        {{ review.customername }}
                                        visited @ <span class="time-span">{{ review.time }}</span> on <span
                                            class="date-span">{{ review.date }}</span></footer>
                                </blockquote>
                            </div>
                        </div>
                    </div>
                    <!-- /review card body -->
                    <!-- review card footer -->
                    <div class="card-footer p-0 text-center">

                        <!-- review card More Info modal trigger button -->
                        <button type="button" class="btn white-text mt-0 mb-3 btn-more-info barber-blue px-3"
                            data-toggle="modal" data-target="#review-card-modal_{{ review.id }}">
                            More info <i class="fas fa-cut"></i>
                        </button>
                        <!-- /review card More Info modal trigger button -->
                        <!-- review card More Info modal -->
                        <div class="modal fade" id="review-card-modal_{{ review.id }}" tabindex="-1" role="dialog"
                            aria-labelledby="review-card-modal-title" aria-hidden="true">
                            <!-- review card modal vertical centering -->
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <!-- review card modal header -->
                                    <div class="modal-header barber-red white-text text-center p-4">
                                        <h5 class="modal-title" id="review-card-modal-title">
                                            <p class="mb-0">Review posted by<i
                                                    class="fas fa-cut px-2 py-0 white-text rounded-circle "
                                                    aria-hidden="true"></i></p>
                                            <p class="mb-0 modal-header-customer-name">
                                                {{ review.customername|title }}
                                            </p>
                                        </h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <!-- /review card modal header -->
                                    <!-- review card modal body -->
                                    <div class="modal-body p-0">
                                        <ul class="list-group list-group-flush">
                                            <ul class="list-group modal-list-group">
                                                <li class="py-3 pl-4 list-group-item barber-blue text-left white-text">
                                                    {{ review.barbershopname|title }} offers booking:</li>
                                                <li class="list-group-item"><span
                                                        class="mr-3 modal-icon-wrapper">{% if review.phone == "by phone" %}<i
                                                            class="fas fa-phone bg-success white-text rounded-circle "
                                                            aria-hidden="true"></i>{% else %}<i
                                                            class="fas fa-phone grey white-text rounded-circle "
                                                            aria-hidden="true"></i>{% endif %}</span><span>by
                                                        phone</span>
                                                </li>
                                                <li class="list-group-item">
                                                    <span
                                                        class="mr-3 modal-icon-wrapper">{% if review.online == "online" %}<i
                                                            class="fas fa-laptop bg-success white-text rounded-circle "
                                                            aria-hidden="true"></i>{% else %}<i
                                                            class="fas fa-laptop grey white-text rounded-circle "
                                                            aria-hidden="true"></i>{% endif %}</span><span>online</span>
                                                </li>
                                                <li class="list-group-item pb-4">
                                                    <span
                                                        class="mr-3 modal-icon-wrapper">{% if review.walkin == "walk-in" %}<i
                                                            class="fas fa-walking bg-success white-text rounded-circle "
                                                            aria-hidden="true"></i>{% else %}<i
                                                            class="fas fa-walking grey white-text rounded-circle "
                                                            aria-hidden="true"></i>{% endif %}</span><span>by
                                                        walk-in</span></li>
                                            </ul>
                                            <ul class="list-group modal-list-group">
                                                <li class="text-left py-3 pl-4 list-group-item barber-blue white-text">
                                                    and payment:
                                                </li>
                                                <li class="list-group-item">
                                                    <span
                                                        class="mr-3 modal-icon-wrapper">{% if review.cash == "cash" %}<i
                                                            class="fas fa-money-bill bg-success white-text rounded-circle "
                                                            aria-hidden="true"></i>{% else %}<i
                                                            class="fas fa-money-bill grey white-text rounded-circle "
                                                            aria-hidden="true"></i>{% endif %}</span><span>by
                                                        cash</span>
                                                </li>
                                                <li class="list-group-item">
                                                    <span
                                                        class="mr-3 modal-icon-wrapper">{% if review.card == "card" %}<i
                                                            class="fas fa-credit-card bg-success white-text rounded-circle "
                                                            aria-hidden="true"></i>{% else %}<i
                                                            class="fas fa-credit-card grey white-text rounded-circle "
                                                            aria-hidden="true"></i>{% endif %}</span><span>by
                                                        card</span>
                                                </li>
                                            </ul>
                                        </ul>
                                    </div>
                                    <!-- /review card modal body -->
                                    <!-- review card modal footer -->
                                    <div class="modal-footer">
                                        <button type="button" class="btn white-text barber-red mx-auto"
                                            data-dismiss="modal">Close</button>
                                    </div>
                                    <!-- /review card modal footer -->
                                </div>
                            </div>
                        </div>
                        <!-- /review card More Info modal -->

                        <!-- review card Are You Sure? modal -->
                        <div class="modal fade" id="review-card-are-you-sure-modal_{{ review.id }}" tabindex="-1"
                            role="dialog" aria-labelledby="review-card-are-you-sure-modal-title" aria-hidden="true">
                            <!-- review card Are You Sure? modal vertical centering -->
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <!-- review card Are You Sure? modal header -->
                                    <div class="modal-header barber-red white-text text-center py-4 px-4_5"
                                        id="are-you-sure-modal-header">
                                        <h5 class="modal-title" id="review-card-are-you-sure-modal-title">
                                            <p class="mb-0">Are you sure you want to delete your review of:</p>
                                        </h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <!-- /review card Are You Sure? modal header -->
                                    <!-- review card Are You Sure? modal body -->
                                    <div class="modal-body text-center px-2 pt-3 pb-4">
                                        <h6 class="mt-4 mb-0 barber-blue-text">{{ review.barbershopname }}?</h6>
                                    </div>
                                    <!-- /review card Are You Sure? modal body -->
                                    <!-- review card Are You Sure? modal footer -->
                                    <div class="modal-footer">
                                        <div class="btn-group-vertical" role="group" aria-label="Vertical button group">
                                            <!-- Delete Review button -->
                                            <a href="{{ url_for('review_delete', review_id=review.id) }}"
                                                class="btn mb-3 rounded-top barber-red-outline px-3 btn-yes-delete-btn barber-red white-text m-0">Yes
                                                <i class="fas fa-cut"></i></a>
                                            <!-- /Delete Review button -->
                                            <!-- review card Are You Sure? modal dismiss button -->
                                            <a class="btn mb-3 rounded-bottom px-3 btn-no-keep-btn barber-blue barber-blue-outline white-text m-0"
                                                id="review-delete-modal-trigger" data-dismiss="modal">No <i
                                                    class="fas fa-cut"></i></a>
                                            <!-- /review card Are You Sure? modal dismiss button -->
                                        </div>
                                    </div>
                                    <!-- /review card Are You Sure? modal footer -->
                                </div>
                            </div>
                        </div>
                        <!-- /review card Are You Sure? modal -->

                    </div>
                    <!-- /review card footer-->
                </div>
            </div>
            {% endfor %}
            <!-- /review card -->

            {% else %}

            <!-- fallback alert displays if no reviews in DB -->
            <div class="well container message-container">
                <div class="alert alert-danger py-2_5 pl-3 pr-4 my-3 mb-0 text-center fade show alert-dismissible flash-msg-box-top"
                    role="alert">
                    <strong>Sorry, no reviews found! Please try again.</strong>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"
                        id="flash-message-dismiss">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
            <!-- /fallback alert displays if no reviews in DB -->

            {% endif %}
        </div>
        <!-- /review cards -->

    </div>
</div>
<!-- /reviews card container -->

{% endblock %}